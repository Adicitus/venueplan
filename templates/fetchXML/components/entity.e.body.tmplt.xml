<<
	$Values.Attributes | ? { $_ } | % {
		
		
			if ($_ -is [hashtable]) {
				Render-Template "$TemplateDir\attribute.e.tmplt.xml" $_
			} else {
				Render-Template "$TemplateDir\attribute.e.tmplt.xml" @{
					Name=$_
				}
			}
		
	}
>>

<<
	# Shortcut allowing us to write conditions directly into the
	# filter-entity level, and skip specifying 1 level of filters if we
	# do not need the functionality it provides.
	if ($Values.containsKey("Conditions")) {
		$filter = @{
			Conditions = $Values.Conditions
		}
		
		if ($Values.ContainsKey("Filters")) {
			$filter.Filters = $Values.Filters
		}
		
		Render-Template "$TemplateDir\filter.e.tmplt.xml" @{
			Filter = $filter
		}
	} else {		
		$Values.Filters | ? { $_ } | % {
			Render-Template "$TemplateDir\filter.e.tmplt.xml" @{
				Filter = $_
			}
		}
	}
>>

<<
	$Values.LinkEntities | ? { $_ } | % {
		Render-Template "$TemplateDir\link-entity.e.tmplt.xml" $_
	}
>>